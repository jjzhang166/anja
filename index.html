<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Anja user's guide</title>
<link rel="stylesheet" href="highlight/styles/default.css" type="text/css">
<link rel="stylesheet" href="format.css" type="text/css">
<link rel="stylesheet" href="color.css" type="text/css">
<script src="highlight/highlight.pack.js" type="text/javascript"></script>
<script type="text/javascript">hljs.initHighlightingOnLoad();</script>
</head>
<body>
<h1>Anja user's guide</h1><p class="titlepage">Torbjörn Rathsman</p><div class="titlepic">
<picture><source srcset="anjalogo-hires.png" media="(min-width:1024px)"><source srcset="anjalogo.png" media="(max-width:1024px)"><img src="anjalogo.png" alt="Title picture"></picture>
</div><div class="abstract"><p>Anja is a sample player designed for live sound effect playback. Anja makes it possible to assign sound effects to the keys of the computer keyboard. Anja also featrues a channel mixer with 16 channels, making it possible to fade a group of sound effects together. The backend of Anja is JACK, the low-latency audio server. The session file format of Anja is in a formalized text format, optimized for human readability.</p>
	</div><nav id="toc">
<h2>Table of contents</h2>
<ol><li><a href="#intro">Introduction</a><ol><li><a href="#requirements">System requirements</a></li><li><a href="#comparison">Anja compared to other software</a></li></ol></li><li><a href="#install">Installing Anja</a><ol><li><a href="#installlinux">Installing on a GNU/Linux system</a></li><li><a href="#compile">Compiling Anja</a></li></ol></li><li><a href="#using">Using Anja</a><ol><li><a href="#addfx">Loading a waveform</a></li><li><a href="#play">Playing waveforms</a></li><li><a href="#rec">Capturing waveforms</a></li><li><a href="#waveformprop">Configuring waveform playback</a><ol><li><a href="#wavesource">Source file selection</a></li><li><a href="#description">Waveform description</a></li><li><a href="#wavecolor">Waveform color</a></li><li><a href="#pbchannel">Playback channel</a></li><li><a href="#pbgain">Playback gain</a></li><li><a href="#pbgainrandom">Playback gain randomization</a></li><li><a href="#pboptions">Controlling playback behavior</a></li><li><a href="#rangeadjust">Adjusting playback range</a></li></ol></li><li><a href="#chmixer">Configuring playback channels</a></li><li><a href="#multichannel">Multi-channel output</a></li><li><a href="#midi">Using MIDI</a></li></ol></li><li><a href="#cmdopts">Command line options</a></li><li><a href="#fileformats">Supported file formats</a></ol>
</nav><h2 id="intro"><span class="fill">1</span> Introduction</h2><p><strong>Anja</strong> is a sample player designed for live sound effect playback. Anja makes it possible to assign sound effects to the keys typing keys of the computer keyboard. To make it easier to find sound effects, each sound effect can have a description and a color, that shows up on Anja's virtual computer keyboard.</p>

	<p>Anja also features a channel mixer with 16 channels. All sound effects are routed through one of these channels. The channel mixer makes it possible to fade a group of sound effects together. As with sound effects, each channel has a color and a description. In addition to color, description and channel gain, each channel also has an adjustable fade time, that is used to automatically fade the channel.</p>

	<p>The backend of Anja is JACK, the low-latency audio server&#160;<cite><a href="#jack">[1]</a></cite>. This makes it possible to connect Anja to other JACK clients enabling the creation of more complex signal flows.</p>

	<p>The session file format of Anja is in a formalized text format, optimized for human readability. The syntax of the session files has taken inspiration from formats such as Markdown&#160;<cite><a href="#markdown">[2]</a></cite> and is very similar to the syntax used in the "Doom template file"&#160;<cite><a href="#doomwiki">[3]</a></cite>. Therefore, session files can be easiliy edited by hand in a text editor, to the price of somewhat larger session files.</p>

	<h3 id="requirements"><span class="fill">1.1</span>System requirements</h3><p>To run Anja, a working installation of JACK&#160;<cite><a href="#jack">[1]</a></cite> is required. Moreover, Anja requires <code>libsndfile</code> and <code>GTK+</code> version 3. Anja runs smoothly on an Intel® Pentium® M, and thus, it is only moderately CPU demanding. However, since Anja completely loads all sound files referenced from a session file, it may consume some RAM. At 48&#160;kHz, the RAM usage is 11&#160;MiB/min of sound. The minimum screen resolution for running Anja in fullscreen mode is 923&#160;px × 599&#160;px. In windowed mode, the required screen resolution depends on the windowing system, but it is approximately 930&#160;px × 630&#160;px.</p>


	<h3 id="comparison"><span class="fill">1.2</span>Anja compared to other software</h3><p>There are other sample players that also may be used with JACK. One such program is Hydrogen&#160;<cite><a href="#hydrogen">[4]</a></cite>. Compared to Hydrogen, Anja lacks a sequencer. However, in Hydrogen, waveforms need to be assigned in a particular order, and Hydrogen does not feature an on-screen keyboard. Other features in Anja is event-triggerd auto-fade, and also a kill-all-softly feature.</p>

	<h2 id="install"><span class="fill">2</span> Installing Anja</h2><p>Before Anja can be used, the program needs to be installed. This chapter goes through the installation procedure.</p>

	<h3 id="installlinux"><span class="fill">2.1</span>Installing on a GNU/Linux system</h3><p>On GNU/Linux, the recommended way of installing Anja is to install it from the software repository. If there is no package available, download the source package&#160;<cite><a href="#anjasrc">[5]</a></cite>, and compile it as according to the instructions in <a href="#compile">Section 2.2</a>.</p>

	<h3 id="compile"><span class="fill">2.2</span>Compiling Anja</h3><p>Before Anja can be compiled, certain programs, and development packages are needed. These are listed in <a href="#depstab">Table 2.1</a>, together with their purpose. Obeserve that some of the packages may need a corresponding development package. On Ubuntu, these packages usually have the suffix <em>dev</em>. Anja has been written using the <code>wand</code> build tool. Therefore, this program has to be available when Anja is compiled. The <dfn>makefile</dfn> distributed with Anja, tries to detect <code>wand</code> before the compilation starts. If the <dfn>makefile</dfn> fails to detect <code>wand</code>, a package containing <code>wand</code> is downloaded from the author's GitHub repository by using <code>wget</code>.</p>

<figure id="depstab"><p><strong>Table 2.1</strong>: Programs and packages needed to compile Anja. Packages marked with a ✻ symbol are libraries that may need a corresponding development package.</p><table>
<tr class="colheaders"><td></td><td>Name</td><td>Purpose</td></tr>
<tr><td></td><td><code>bash</code></td><td>Command line interpreter used to interpret commands given by <code>make</code></td></tr>
<tr><td></td><td>Blender</td><td>Used to render Anja's logo.</td></tr>
<tr><td></td><td><code>g++</code></td><td>The GNU C++ compiler</td></tr>
<tr><td></td><td><code>git</code></td><td>Used to retrieve version info</td></tr>
<tr><td></td><td><code>head</code></td><td>Used to extract information about the compiler</td></tr>
<tr><td></td><td><code>jackd</code></td><td>Audio backend server</td></tr>
<tr><td>✻</td><td><code>libgtk-3</code></td><td>GUI backend on GNU/Linux</td></tr>
<tr><td>✻</td><td><code>libjack</code></td><td>Audio backend server, client library</td></tr>
<tr><td>✻</td><td><code>libsndfile</code></td><td>Library used to load sound files</td></tr>
<tr><td></td><td><code>make</code></td><td>Build script interpreter</td></tr>
<tr><td></td><td><code>mv</code></td><td>Used to rename Blender output files</td></tr>
<tr><td></td><td>ImageMagick</td><td>Used to generate an RGBA dump from a PNG file</td></tr>
<tr><td></td><td><code>tr</code></td><td>Used to extract information about the compiler. Also used to replace newlines with null terminator in compilation information strings.</td></tr>
<tr><td></td><td><code>touch</code></td><td>Used to force recompilation of the program information module</td></tr>
<tr><td></td><td><code>wand</code> (from Gabi)</td><td>Used as compiler frontend</td></tr>
<tr><td></td><td><code>wget</code></td><td>In abscence of <code>wand</code>, <code>wget</code> is used to download <code>wand</code> version 5.77 from the author's GitHub repository.</td></tr>
<tr><td></td><td><code>xxd</code></td><td>Used to generate an RGBA dump from the PNG file produced by <code>Blender</code></td></tr>
</table>
</figure><p>As mentioned above, the Anja source package can be obtained from &#160;<cite><a href="#anjasrc">[5]</a></cite>. Following this link gives the choice of downloading a gzipped tarball, or a zip archive. For the purpose of this tutorial, it is assumed that the tarball is downloaded. In order to extract that tarball, which is assumed to be called <var>filename</var>, issue the command</p>

	<pre><code class="bash">tar -xf filename</code></pre><p>This will create a directory with a name derived from the name of the downloaded file, in the current working directory. If <var>filename</var> is <code>anja-release-2-2.tar.gz</code>, it will be called <code>anja-release-2-2</code>. Now <code>cd</code> into that directory and run <code>make</code>:</p>

	<pre><code class="bash">cd anja-release-2-2
make</code></pre><p>When running <code>make</code>, files are written to <code>__wand_targets_rel</code>. After the compilation has completed, Anja can be launched directly by running the command</p>
<pre><code class="bash">__wand_targets_rel/anja</code></pre><div class="infobox_warning ">
<picture>
<source srcset="warning.svg">
<img src="warning.gif">
</picture>
<div>Normally, Anja is distributed with pre-rendered logo images. It may happen that the corresponding <code>Blender</code> file has been updated and not the logo images. In this case, it will take a much longer time than normal, to compile Anja, since the <dfn>makefile</dfn> will need to rerender the logo.</div>
</div>

	<p>To make it easier to launch Anja, you can move it to a place mentioned in the <code>PATH</code> variable. For example, if you have <code>sudo</code> permissions, you can do</p>
<pre><code class="bash">sudo mv __wand_targets_rel/anja /usr/local/bin</code></pre><p>If you do not have <code>sudo</code> permissions, you can move it to <code>~/bin</code> instead:</p>
<pre><code class="bash">mv __wand_targets_rel/anja ~/bin</code></pre><h2 id="using"><span class="fill">3</span> Using Anja</h2><p>Starting Anja without any command line arguments brings up a window that looks like the one presented in <a href="#anjastart">Figure 3.1</a>. The workspace consits of three main parts annotated in <a href="#anjaworkspace">Figure 3.2</a>. To the left, there the <dfn>Action panel</dfn> a panel with different buttons that affect Anja's current state. To the right of that, the <dfn>Keyboard view</dfn> is located, and below that, there is a <dfn>Settings panel</dfn>, controling which waveforms are loaded as well as the playback of loaded waveforms. Above the <dfn>Keyboard view</dfn>, there is an area for text messages indicating the state of the audio engine.</p>

	<figure id="anjastart">
<picture><source srcset="anja-mainwindowstart.png"><img src="anja-mainwindowstart.png" alt="The Anja window, as shown after launching Anja without any command line arguments"></picture><p><strong>Figure 3.1</strong>: The Anja window, as shown after launching Anja without any command line arguments</p></figure><figure id="anjaworkspace">
<picture><source srcset="anjaworkspace.png"><img src="anjaworkspace.png" alt="The different parts of the Anja workspace. (1) is the "></picture><p><strong>Figure 3.2</strong>: The different parts of the Anja workspace. (1) is the <dfn>Action panel</dfn>, used to control Anja's state, (2) is the <dfn>Keyboard view</dfn>, which selects waveform slots and channels, and (3) is the <dfn>Settings panel</dfn>, which controls which loads waveforms and controls the playback of loaded waveforms.</p></figure><h3 id="addfx"><span class="fill">3.1</span>Loading a waveform</h3><p>To load a waveform, choose a slot by clicking on the corresponding key in the <dfn>Keyboard view</dfn>. It is possible to choose any key except one of the function keys, but it is recommended to avoid the keys <kbd>Alt</kbd> and <kbd>❖</kbd>. After choosing a slot click <ui-button>Browse...</ui-button> to the right of <ui-formfield>Source</ui-formfield> field now visible in the <dfn>Settings panel</dfn>. This brings up a file selection dialog. It is also possible to type a filename directly in the text input field to the left of <ui-button>Browse...</ui-button>.</p>

	<div class="infobox_info ">
<picture>
<source srcset="info.svg">
<img src="info.gif">
</picture>
<div>In case a multi-channel audio file is loaded, only the data for the first (usually the "left" channel) will be loaded. This is because Anja uses mono waveforms. For information about playing multi-channel audio, see <a href="#multichannel">Section 3.6</a>.
	</div>
</div>

	<h3 id="play"><span class="fill">3.2</span>Playing waveforms</h3><p>Before any sound can be heard from Anja, the <dfn>audio engine</dfn> has to be running. The <dfn>audio engine</dfn> is started by clicking the button <ui-button>Start engine</ui-button> in the <dfn>Action panel</dfn>. Now, when the engine is running, there should be a new JACK client with a name that derived from the name of the current Anja session. For example, after starting the engine on the default session, there should be a JACK client called <code>New session.anja</code>. To list all JACK clients and ports open a teminal and type</p>

	<pre><code class="bash">jack_lsp</code></pre><p>If you did not load any old session, or have not modified the default session, you will see something like</p>
	<pre><code class="nohighlight">system:capture_1
system:capture_2
system:playback_1
system:playback_2
New session.anja:Master out
New session.anja:Audio capture
New session.anja:MIDI in
New session.anja:MIDI out</code></pre><p>The interesting port in this case is <code>New session.anja:Master out</code>. Connecting this port to <code>system:playback_1</code> and <code>system:playback_2</code> will enable sound output from Anja to the left and right speaker (or what ever is connected to the corresponding audio output ports of the computer). JACK ports can be connected by using the command <code>jack_connect</code>&#160;<cite><a href="#manjack">[6]</a></cite>. The command to connect these ports would be</p>
<pre><code class="bash">jack_connect 'New session.anja:Master out' 'system:playback_1'
jack_connect 'New session.anja:Master out' 'system:playback_2'
</code></pre><p>The status message shown when the audio engine is running suggests using a JACK patchbay tool such as <code>Catia</code>&#160;<cite><a href="#catia">[7]</a></cite> shown in <a href="#catia">Figure 3.3</a>. In <code>Catia</code> ports can be connected using "Drag and drop".</p>

<p>When the <dfn>audio engine</dfn> is started, and the output port is connected, a loaded waveform can be played by hitting the corresponding key on the computer keyboard. Depending on playback options (see <a href="#pboptions">Section 3.4.7</a>), playback is stopped  by releasing the key, or when the playback position reaches the <dfn>end cursor</dfn> (see ??).</p>

<div class="infobox_info ">
<picture>
<source srcset="info.svg">
<img src="info.gif">
</picture>
<div>Triggering playback through the computer keyboard is only possible when the <dfn>Keyboard view</dfn> has keyboard focus. This is indicated by a green rectangle.</div>
</div>

<figure id="catia">
<picture><source srcset="catiaanja.png"><img src="catiaanja.png" alt="Catia with an Anja session started"></picture><p><strong>Figure 3.3</strong>: Catia with an Anja session started</p></figure><h3 id="rec"><span class="fill">3.3</span>Capturing waveforms</h3><p>Similar to waveform playback (see <a href="#play">Section 3.2</a>), waveform capture requires that the audio engine is started. In order to capture a waveform, make sure that <code>Audio capture</code> is connected to a signal source. Then press <kbd>Ins</kbd> and the typeing area key <kbd><var>K</var></kbd> that should be used for playing the captured waveform. If the <kbd>Ins</kbd> is released before the typing area key, the captured waveform will be playback of the recorded waveform is triggered. If <kbd><var>K</var></kbd> is released first, the capture process is stoppped.</p>

<div class="infobox_info ">
<picture>
<source srcset="info.svg">
<img src="info.gif">
</picture>
<div>Triggering audio capture through the computer keyboard is only possible when the <dfn>Keyboard view</dfn> has keyboard focus. This is indicated by a green rectangle.</div>
</div>

<div class="infobox_info ">
<picture>
<source srcset="info.svg">
<img src="info.gif">
</picture>
<div>It is not possible to record waveforms to a slot that has been marked as read-only. See <a href="#waveformprop">Section 3.4</a> form more information.</div>
</div>

<div class="infobox_warning ">
<picture>
<source srcset="warning.svg">
<img src="warning.gif">
</picture>
<div>Capturing waveforms stores the waveform in virtual memory. This means that it is not possible to record longer waveforms. Also, trying to do so may crash Anja. See <a href="#requirements">Section 1.1</a> for information about memory requirements.</div>
</div>

<h3 id="waveformprop"><span class="fill">3.4</span>Configuring waveform playback</h3><p>The playaback behaviour and other properties can be controlled through the <dfn>Waveform data</dfn> tab in the <dfn>Settings panel</dfn> (Area (3) in <a href="#anjaworkspace">Figure 3.2</a>). An enlarged view of the <dfn>Waveform data</dfn> panel is shown in <a href="#waveformdata">Figure 3.4</a>. This view is activated by clicking on the corresponding key on the keyboard view (Area (2) in <a href="#anjaworkspace">Figure 3.2</a>).</p>

<figure id="waveformdata">
<picture><source srcset="anja-waveformdata.png"><img src="anja-waveformdata.png" alt="An enlarged view of the "></picture><p><strong>Figure 3.4</strong>: An enlarged view of the <dfn>Settings panel</dfn> showing waveform data. This panel contains various settings controlling playback of the selected slot.</p></figure><h4 id="wavesource"><span class="fill">3.4.1</span>Source file selection</h4><p>The source file is chosen throught the <ui-formfield>Source</ui-formfield> field. By clicking <ui-button>Browse</ui-button>, a file selection dialog appears. When a different wave file is selected Anja replaces the waveform associated with current slot, with the waveform loaded from the chosen file. For information about supported file formats, see <a href="#fileformats">Chapter 2</a>.</p>

<div class="infobox_info ">
<picture>
<source srcset="info.svg">
<img src="info.gif">
</picture>
<div>
	It is not possible to load another waveform when the current slot is in use by the engine.
</div>
</div>

<div class="infobox_info ">
<picture>
<source srcset="info.svg">
<img src="info.gif">
</picture>
<div>
	Changing the source file from disk does not affect Anja, since Anja loads the file into memory.</div>
</div>

<div class="infobox_warning ">
<picture>
<source srcset="warning.svg">
<img src="warning.gif">
</picture>
<div>
	Avoid loading large files. Doing so, may exhaust system memory. See <a href="#requirements">Section 1.1</a> for information about memory requirements.
</div>
</div>

<h4 id="description"><span class="fill">3.4.2</span>Waveform description</h4><p>It is possible to assign an arbitrary description to the waveform slot through the <ui-formfield>Description</ui-formfield> field. The description does not affect the waveform playback, but makes it easier to find the waveform in the <dfn>Keyboard view</dfn>.</p>

<p>It may happen that the description is long. Therefore it is possible to mark a key-phrase by surrounding it with square brackets. Then, only the text within the first pair of square brackets will appear at the virtual key. If there are no square brackets within the description, the first word will be used instead.</p>

<h4 id="wavecolor"><span class="fill">3.4.3</span>Waveform color</h4><p>Like description (see <a href="#description">Section 3.4.2</a>), the <ui-formfield>Color</ui-formfield> field is only used for visual enhancements. The color is given as red-green-blue-alpha values delimited by <char>;</char>, where each component is in the range [0, 1]. If the <ui-button>...</ui-button> is pressed a color selection dialog based on the HSL color system appears. This dialog is described in more detail in ??.</p>

<div class="infobox_info ">
<picture>
<source srcset="info.svg">
<img src="info.gif">
</picture>
<div>
	The idea behind color coding of waveform slots is that slots that are used in similar context can be encoded with a similar color. The color coding feature can be used to categorize different kinds of waveforms such as <var>Fx</var>  and <var>Ambient</var>.
</div>
</div>

<h4 id="pbchannel"><span class="fill">3.4.4</span>Playback channel</h4><p>The <ui-formfield>Playback channel</ui-formfield> field assigns a channel to the waveform slot. All sound from this slot will be routed through the selected channel.</p>

<div class="infobox_info ">
<picture>
<source srcset="info.svg">
<img src="info.gif">
</picture>
<div>
	Channels can be used to fade multiple sound sources together. The mix of all channels can either be controlled by the internal <dfn>Channel mixer</dfn> (see <a href="#chmixer">Section 3.5</a>), or by an external mixer (see ??).
</div>
</div>

<h4 id="pbgain"><span class="fill">3.4.5</span>Playback gain</h4><p>Before the signal reaches the strip for the selected playback channel (see <a href="#pbchannel">Section 3.4.4</a>), the signal is amplified by the given playback gain. The gain can be adjusted from -72&#160;dB to 6&#160;dB.</p>

<h4 id="pbgainrandom"><span class="fill">3.4.6</span>Playback gain randomization</h4><p>In addition to deterministic playback gain adjustment, it is possible to add a non-deterministic component to the playback gain. The  parameter <ui-formfield>Playback gain random level</ui-formfield> sets how much the random component is amplified.</p>

<div class="infobox_info ">
<picture>
<source srcset="info.svg">
<img src="info.gif">
</picture>
<div>Depending on the state of the <ui-formfield>Set gain on loop</ui-formfield> flag (see <a href="#pboptgainrand">Section 3.4.7.4</a>), new random numbers are drawn on manual retriggering, or for each iteration when playback loop is active. This can be useful on machinegun effects.</div>
</div>

<h4 id="pboptions"><span class="fill">3.4.7</span>Controlling playback behavior</h4><p>There are different options for controlling the playback behavior. These are <dfn>Loop</dfn>, <dfn>Sustain</dfn>, <dfn>Readonly</dfn>, and <dfn>Set gain on loop</dfn>.</p>

<h5 id="pboptloop"><span class="fill">3.4.7.1</span>Loop</h5><p>When <dfn>Loop</dfn> is enabled, playback will start form the beginning when the playback position reaches the <dfn>end cursor</dfn>, if no stopping event has occurred before that happens.</p>

<h5 id="pboptsustain"><span class="fill">3.4.7.2</span>Sustain</h5><p>The <dfn>Sustain</dfn> flag controls whether or not a key release event should also send a stop event. When the <dfn>Sustain</dfn> flag is set, a stop event is not sent, emulating the effect of a pushed sustain pedal. </p>

<h5 id="pboptreadonly"><span class="fill">3.4.7.3</span>Readonly</h5><p>The <dfn>Readonly</dfn> flag controls whether or not it is possible to overwrite a loaded waveform with captured audio (see <a href="#rec">Section 3.3</a>). Enabling <dfn>Readonly</dfn> prevents that a loaded waveform is accidentally overwritten.</p>

<h5 id="pboptgainrand"><span class="fill">3.4.7.4</span>Set gain on loop</h5><p>As mentioned in <a href="#pbgainrandom">Section 3.4.6</a>, it is possible to only randomize gain on the trig event, but it is also possble set a new gain for each iteration in a loop. When this flag is set, the latter happens.</p>

<h4 id="rangeadjust"><span class="fill">3.4.8</span>Adjusting playback range</h4><p>It may happen that only a portion of a loaded waveform is interesting. With the <dfn>Trim panel</dfn>, it is possible to select the part of the waveform that should be played. The graph shows in dBFS, the root mean square power integrated over 1&#160;ms, as a function of time in seconds. On to of the power function, there are three <dfn>cursors</dfn> that can be moved by click and drag.</p>

<h5 id="rangeadjustmanual"><span class="fill">3.4.8.1</span>Manual range adjustments</h5><p>	The green <dfn>cursor</dfn> marks the playback starting position. The red one marks the stopping position. The positions are moved by moving the corresponding cursor to the desired position. The start and stop position can also be set by typing their positions into the corresponding input fields, <ui-formfield>Begin</ui-formfield> and <ui-formfield>end</ui-formfield>. The positions are in this case given in seconds.</p>

<div class="infobox_info ">
<picture>
<source srcset="info.svg">
<img src="info.gif">
</picture>
<div>
	If the end <dfn>cursor</dfn> has been placed to the left of the begin <dfn>cursor</dfn>, Anja will play the wavefile backwards.
</div>
</div>

<div class="infobox_info ">
<picture>
<source srcset="info.svg">
<img src="info.gif">
</picture>
<div>
	If a more detailed view of a certain part of the loaded waveform is needed in order to set the start ans stop positions, it is possible to zoom in on the current range by pressing <kbd>Z</kbd>. If <kbd>X</kbd> is pressed, the view will return to the previous view.
</div>
</div>

<h5 id="rangeauto"><span class="fill">3.4.8.2</span>Auto-adjusting playback range</h5><p>In addition to manually adjusting the playback range, it is possible to let Anja compute a range automatically. In this case, Anja will use the first and last positions where the signal level exceeds a certain threshold level, start and stop positions. The threshold can be adjusted by moving the yellow (horisontal) <dfn>cursor</dfn> to a suitable level. Clicking on one of the <ui-button>Auto</ui-button> buttons will adjust the corresponding position. If the <kbd>Shift</kbd> is pressed while the yellow <dfn>cursor</dfn> is moved, Anja will adjust both positions accordingly.</p>

<h3 id="chmixer"><span class="fill">3.5</span>Configuring playback channels</h3><p>The <dfn>Channel mixer</dfn> is shown in <a href="#channelmixerfig">Figure 3.5</a>. The <dfn>Channel mixer</dfn> controls the playback volume for the different playback channels. To the right of all channel strips, there is a master gain control, which controls the playback volume of the mixed channels. In addition to a gain control, each channel strip also contains an input field for selecting a channel color, which works similar to the color input field for waveforms (see <a href="#wavecolor">Section 3.4.3</a>), and a control for determining the <dfn>time constant</dfn> for automatic fade-in/out.</p>

<figure id="channelmixerfig">
<picture><source srcset="anjamixer.png"><img src="anjamixer.png" alt="The "></picture><p><strong>Figure 3.5</strong>: The <dfn>Channel mixer</dfn>. Each channel strip has a label, a color, a fade time knob, and a volume slider. To the right of all strips, there is a master gain control, that affects the gain of the mix.</p></figure><div class="infobox_info ">
<picture>
<source srcset="info.svg">
<img src="info.gif">
</picture>
<div>
	It may be a good idea to match the channel colors in some way to the colors used for the waveform associated with the playback channel. This makes it easier to find the right channel strip in the <dfn>Channel mixer</dfn>.
</div>
</div>

<div class="infobox_info ">
<picture>
<source srcset="info.svg">
<img src="info.gif">
</picture>
<div>
	The knob for controlling the <dfn>time constant</dfn> for autofade works in polar coordinates. If it is hard to find the right value, try to increase the distance to the knob center when adjusting the corresponding value
</div>
</div>

<p>Automatic fade-in/out is triggered by hitting <kbd>F<var>k</var></kbd> while pressing <kbd>↑</kbd>/<kbd>↓</kbd>, where <var>k</var> is the channel number. After fade-out, the channel is muted until it is unmuted or a fade-in occures. Mute and unmuting a channel is done by hitting the corresponding channel key (<kbd>F<var>k</var></kbd>) while pressing <kbd>←</kbd> or <kbd>←</kbd> respectively.</p>

<div class="infobox_info ">
<picture>
<source srcset="info.svg">
<img src="info.gif">
</picture>
<div>
	It is only possible to access channel 1 to 12 from the PC keyboard. In order to autofade channel 13-16, an external MIDI controller can be used, see <a href="#midi">Section 3.7</a>.
</div>
</div>

<div class="infobox_info ">
<picture>
<source srcset="info.svg">
<img src="info.gif">
</picture>
<div>
	Using the PC keyboard to trigg fade-in/out is only possible when the <dfn>Keybord view</dfn> is active.
</div>
</div>

<h3 id="multichannel"><span class="fill">3.6</span>Multi-channel output</h3><h3 id="midi"><span class="fill">3.7</span>Using MIDI</h3><h2>References</h2><p class="bibitem" id="jack"> [1] 
		<a href="http://jackaudio.org" target="blank">http://jackaudio.org</a></p><p class="bibitem" id="markdown"> [2] 
		<a href="https://daringfireball.net/projects/markdown" target="blank">https://daringfireball.net/projects/markdown</a></p><p class="bibitem" id="doomwiki"> [3] 
		<a href="http://doom.wikia.com/wiki/Doom_file_template" target="blank">http://doom.wikia.com/wiki/Doom_file_template</a></p><p class="bibitem" id="hydrogen"> [4] 
		<a href="http://www.hydrogen-music.org/hcms" target="blank">http://www.hydrogen-music.org/hcms</a></p><p class="bibitem" id="anjasrc"> [5] 
		<a href="https://github.com/milasudril/anja/releases/latest" target="blank">https://github.com/milasudril/anja/releases/latest</a></p><p class="bibitem" id="manjack"> [6] 
		<code>jack_connect</code> manual page</p><p class="bibitem" id="catia"> [7] 
		<a href="http://kxstudio.org" target="blank">http://kxstudio.org</a></p><h2 id="cmdopts"><span class="fill">A</span> Command line options</h2><p>It is possible to control how Anja is started from the command line. The general syntax is</p>

	<pre><code class="bash">anja [OPTIONS] [--] session</code></pre><p>All possible options are listed in <a href="#cmdoptstab">Table A.1</a>.</p>

	<figure id="cmdoptstab"><p><strong>Table A.1</strong>: Command line options for Anja</p><table>
<tr class="colheaders"><td>Option</td><td>Description</td></tr>
<tr><td>--about</td><td>prints an about message to standard output and exits</td></tr>
<tr><td>--dark</td><td>starts Anja in dark mode. This is default.</td></tr>
<tr><td>--fullscreen</td><td>starts Anja in fullscreen mode</td></tr>
<tr><td>--light</td><td>starts Anja in light mode</td></tr>
<tr><td>--windowed</td><td>starts Anja in windowed mode. This is default.</td></tr>
<tr><td>--help</td><td>prints a summary of command line options to standard output and exits</td></tr>
</table>
</figure><h2 id="fileformats"><span class="fill">B</span> Supported file formats</h2><p>Anja uses <code>libsndfile</code> in order to load wave files. Thus the file formats supported by Anja, are the same as the file formats supported by <code>libsndfile</code>.</p>

</body>
</html>
